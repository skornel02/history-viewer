(this["webpackJsonphistory-viewer"]=this["webpackJsonphistory-viewer"]||[]).push([[0],{126:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),o=n(7),r=n.n(o),a=(n(85),n(18)),l=n(128),d=n(161),u=n(162),s=n(163),h=n(164),f=n(73),j=n.n(f),b=n(72),v=n.n(b),m=n(3),g=function(e){var t=e.topic,n=e.selectItem,i=Object(c.useState)(!0),o=Object(a.a)(i,2),r=o[0],h=o[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(l.a,{button:!0,onClick:function(){return h(!r)},children:[Object(m.jsx)(d.a,{color:"primary",children:t.name}),r?Object(m.jsx)(v.a,{}):Object(m.jsx)(j.a,{})]}),Object(m.jsx)(u.a,{in:!r,timeout:"auto",children:Object(m.jsx)(s.a,{component:"div",disablePadding:!0,children:t.items.map((function(e){return Object(m.jsx)(l.a,{button:!0,onClick:function(t){t.preventDefault(),n(e)},style:{paddingLeft:"2rem"},children:Object(m.jsx)(d.a,{children:e.name})},"navlink-".concat(e.name))}))})})]})},O=function(e){var t=e.topics,n=e.selectItem;return Object(m.jsx)(s.a,{component:"nav",subheader:Object(m.jsx)(h.a,{component:"div",children:"Jegyzetek"}),children:t.map((function(e){return Object(m.jsx)(g,{topic:e,selectItem:n},"topic-".concat(e.name))}))})},p=n(37),y=n(25),x=function e(t){return"text"===t.type?t.data:"tag"===t.type?t.children.map((function(t){return e(t)})).join("\n"):""};function w(e){var t,n,c=e.match(/d\/(.*)&sa.*/),i=e.match(/d\/(.*)\//),o=e.match(/id%3D(.*)&sa.*/);return(null!==(t=null!==(n=null!==c&&void 0!==c?c:i)&&void 0!==n?n:o)&&void 0!==t?t:["","-"])[1].replace(/\/edit$/,"").replace(/\//,"")}var k=n(52),C=n(74),E=n.n(C),I=function(e){var t=e.children,n=e.width,o=e.handleKeyboard,r=e.registerTouchHandler,l=void 0===r?function(){return function(){}}:r,d=Object(c.useState)(500),u=Object(a.a)(d,2),s=u[0],h=u[1],f=i.a.createRef(),j=function(e){e.current&&e.current.node.contentDocument&&0!==e.current.node.contentDocument.body.scrollHeight&&(console.log(e.current.node.contentDocument.body.scrollHeight),h(e.current.node.contentDocument.body.scrollHeight))};return Object(c.useEffect)((function(){var e,t,n;o&&(null===(t=f.current)||void 0===t||null===(n=t.node.contentWindow)||void 0===n||n.addEventListener("keydown",o));var c=l(null===(e=f.current)||void 0===e?void 0:e.node.contentWindow),i=setInterval((function(){j(f)}),200);return function(){var e,t;o&&(null===(e=f.current)||void 0===e||null===(t=e.node.contentWindow)||void 0===t||t.removeEventListener("keydown",o));clearInterval(i),c()}}),[t]),Object(m.jsx)(E.a,{style:{height:s},width:n,ref:f,onLoad:function(){j(f)},scrolling:"no",frameBorder:"0",children:t})},F=function(){return Object(m.jsx)("div",{id:"ReaderCss",children:Object(m.jsx)("style",{children:"\n#contentBody {\n    padding: 10px;\n    margin: 0 auto;\n}\n"})})},L=n(48),T=(n(107),n(43)),z=n.n(T),H=function(e){var t=e.initialItem,n=e.onClickUrl,o=e.handleKeyboard,r=e.registerTouchHandler,l=Object(c.useState)(),d=Object(a.a)(l,2),u=d[0],s=d[1];Object(c.useEffect)((function(){if(void 0!==t&&void 0===u){var e=new Headers;e.append("pragma","no-cache"),e.append("cache-control","no-cache"),fetch("https://docs.google.com/document/u/1/d/".concat(t.id,"/pub?embedded=true&r=").concat(Math.floor(1e4*Math.random())),{headers:e,redirect:"manual"}).then((function(e){return e.text()})).then((function(e){console.log("Loading ".concat(t.name,", url = ","https://docs.google.com/document/u/1/d/".concat(t.id,"/pub?embedded=true&r=").concat(Math.floor(1e4*Math.random())),", result html: "),e),s(e)}))}}),[u]);var h=i.a.useCallback((function(e){if("tag"===e.type){var t=e;if("html"===t.tagName||"head"===t.tagName)return Object(m.jsx)(m.Fragment,{children:Object(y.c)(t.children,{replace:h})});if("body"===t.tagName){var c=Object(y.a)(t.attribs);return Object(m.jsx)("div",Object(k.a)(Object(k.a)({id:"contentBody"},c),{},{children:Object(y.c)(t.children,{replace:h})}))}if("a"===t.tagName)return Object(m.jsx)("a",{style:{cursor:"pointer"},onClick:function(){return n(t.attribs.href)},children:Object(y.c)(t.children,{replace:h})})}}),[n]);if(void 0===t)return Object(m.jsx)(L.a,{variant:"body1",children:"V\xe1lassz ki egy t\xe9mak\xf6rt..."});if(void 0===u)return Object(m.jsx)("div",{style:{margin:"0 auto",width:"100px"},children:Object(m.jsx)(z.a,{type:"Watch",color:"#00BFFF",width:"100px"})});var f=u.replace("</head>","</head><body>")+"</body>",j=Object(y.b)(f,{replace:h});return Object(m.jsxs)(I,{width:"100%",handleKeyboard:o,registerTouchHandler:r,children:[Object(m.jsx)(F,{}),j]})},S=(n(126),n(167)),D=n(168),M=n(175),B=n(176),N=n(170),W=n(173),P=n(169),R=n(171),U=n(172),X=n(46),K=function(){var e,t=Object(c.useState)(!1),n=Object(a.a)(t,2),o=n[0],r=n[1],l=i.a.useState(null),d=Object(a.a)(l,2),u=d[0],s=d[1],h=Object(c.useState)(!1),f=Object(a.a)(h,2),j=f[0],b=f[1],v=Object(X.b)(),g=Object(c.useState)(),k=Object(a.a)(g,2),C=k[0],E=k[1],I=Object(c.useState)(),F=Object(a.a)(I,2),T=F[0],K=F[1],A=i.a.useMemo((function(){return void 0!==C&&void 0!==T?function(e,t){var n,c=Object(p.a)(e);try{for(c.s();!(n=c.n()).done;){var i=n.value;if(i.items.some((function(e){return e===t})))return i}}catch(o){c.e(o)}finally{c.f()}throw Error("No topic found")}(C,T):void 0}),[T]),J=i.a.useMemo((function(){if(void 0!==A){var e=A.items.findIndex((function(e){return e===T}));if(!(e<1))return A.items[e-1]}}),[T]),Y=i.a.useMemo((function(){if(void 0!==A){var e=A.items.findIndex((function(e){return e===T}));if(!(e>=A.items.length))return A.items[e+1]}}),[T]),Z=i.a.useCallback((function(e){K(e)}),[]),V=i.a.useCallback((function(){void 0!==J&&K(J)}),[J]),$=i.a.useCallback((function(){void 0!==Y&&K(Y)}),[Y]);Object(c.useEffect)((function(){void 0===C&&function(){var e=new Headers;return e.append("pragma","no-cache"),e.append("cache-control","no-cache"),fetch("https://docs.google.com/document/d/1ltZCNiI154npdUWUAHFuZC-lCZ32fYW7UVEvEru5Xxs/pub?embedded=true",{headers:e}).then((function(e){return e.text()})).then((function(e){var t=e.replace("</head>","</head><body>")+"</body>";console.log(t);var n=Object(y.d)(t);if(0===n.length)throw new Error("Hiba a f\u0151tartalomjegyz\xe9k feldolgoz\xe1sa k\xf6zben! html");console.log(n);var c=n[2];if(console.log(c),void 0===c)throw new Error("Hiba a f\u0151tartalomjegyz\xe9k feldolgoz\xe1sa k\xf6zben! body");var i,o=[],r={name:"",items:[]},a={name:"",id:""},l=function(){0!==r.name.length&&(o.push(r),console.log("Persisting topic: ",r.name))},d=c.children.filter((function(e){return"tag"===e.type&&"div"==e.name}))[0],u=Object(p.a)(d.children);try{for(u.s();!(i=u.n()).done;){var s=i.value;if("tag"===s.type){var h=s;if("h1"===h.name){l();var f=x(h);r={name:f,items:[]},a={name:"",id:""},console.log("Reading topic: ",r.name)}else if("h2"===h.name&&(console.log(h),console.log("Reading item: ",a.name),h.children.length>0&&"tag"===h.children[0].type&&h.children[0].children.length>0&&"tag"===h.children[0].children[0].type)){var j,b=null!==(j=h.children[0].children[0].attribs.href)&&void 0!==j?j:"";console.log(b);var v=w(b);console.log(v),0!==(a={name:x(h),id:v}).name.length&&0!==a.id.length&&(r.items.push(a),console.log("Persisting item: ",a.name))}}}}catch(m){u.e(m)}finally{u.f()}return l(),o}))}().then((function(e){E(e),K(e[0].items[0])}))}),[C]);var _=i.a.useCallback((function(e){"ArrowLeft"===e.key?V():"ArrowRight"===e.key&&$()}),[V,$]),q=i.a.useCallback((function(e){if(void 0===e||null==e)return function(){};var t=null,n=new Date,c=function(e){e.touches.length>0?(t=e.touches.item(0),n=new Date):t=null},i=function(c){var i=.6*e.outerWidth;if(null!==t){var o=c.changedTouches.item(0);if(null===o)return;if(Math.abs(t.pageY-o.pageY)>10)return;if((new Date).getTime()-n.getTime()>1e3)return;t.pageX+i<o.pageX&&V(),t.pageX-i>o.pageX&&$()}};return e.addEventListener("touchstart",c),e.addEventListener("touchend",i),function(){e.removeEventListener("touchstart",c),e.removeEventListener("touchend",i)}}),[V,$]);return Object(c.useEffect)((function(){var e=q(window);return document.addEventListener("keydown",_),function(){document.removeEventListener("keydown",_),e()}}),[_]),void 0===C?Object(m.jsx)("div",{style:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(m.jsx)(z.a,{type:"TailSpin",color:"#00BFFF",width:"10vw"})}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(S.a,{}),Object(m.jsx)("div",{style:{position:"absolute",left:0,top:0},children:Object(m.jsx)(D.a,{onClick:function(){return r(!0)},children:Object(m.jsx)(P.a,{})})}),Object(m.jsx)(M.a,{anchor:"left",open:o,onClose:function(){return r(!1)},onOpen:function(){return r(!0)},children:Object(m.jsx)(O,{topics:C,selectItem:Z})}),Object(m.jsxs)("div",{id:"content",children:[Object(m.jsx)(L.a,{variant:"h2",align:"center",onClick:function(e){s(e.currentTarget),b(!0)},children:null===A||void 0===A?void 0:A.name}),Object(m.jsx)(B.a,{anchorEl:u,open:j,onClose:function(){return b(!1)},keepMounted:!0,children:C.map((function(e){return Object(m.jsx)(N.a,{onClick:function(){Z(e.items[0]),b(!1)},children:e.name},"menu-".concat(e.name))}))}),Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)("div",{style:{width:"50%"},children:Object(m.jsxs)("div",{style:{margin:"0 auto 0 0",width:"fit-content",display:"flex",alignItems:"center"},children:[Object(m.jsx)(D.a,{onClick:V,style:{display:void 0===J?"none":"inherit"},children:Object(m.jsx)(R.a,{})}),Object(m.jsx)(L.a,{variant:"body1",children:null===J||void 0===J?void 0:J.name})]})}),Object(m.jsx)("div",{style:{width:"50%"},children:Object(m.jsxs)("div",{style:{margin:"0 0 0 auto",width:"fit-content",display:"flex",alignItems:"center"},children:[Object(m.jsx)(L.a,{variant:"body1",children:null===Y||void 0===Y?void 0:Y.name}),Object(m.jsx)(D.a,{onClick:$,style:{display:void 0===Y?"none":"inherit"},children:Object(m.jsx)(U.a,{})})]})})]}),Object(m.jsx)(W.a,{}),Object(m.jsx)(H,{initialItem:T,onClickUrl:function(e){if(void 0!==C){var t=w(e),n=function(e,t){var n,c=Object(p.a)(e);try{for(c.s();!(n=c.n()).done;){var i,o=n.value,r=Object(p.a)(o.items);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a.id===t)return a}}catch(l){r.e(l)}finally{r.f()}}}catch(l){c.e(l)}finally{c.f()}}(C,t);n?K(n):v({title:"Biztos megszeretn\xe9 nyitni ezt a k\xfcls\u0151 hivatkoz\xe1st?",cancellationText:"Nem",confirmationText:"Igen"}).then((function(){var t=window.open(e,"_blank");t&&t.focus()}))}},handleKeyboard:_,registerTouchHandler:q},null!==(e=null===T||void 0===T?void 0:T.id)&&void 0!==e?e:"not-selected"),Object(m.jsx)(W.a,{})]})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,177)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),o(e),r(e)}))};r.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(X.a,{children:Object(m.jsx)(K,{})})}),document.getElementById("root")),A()},85:function(e,t,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.b5e67a75.chunk.js.map