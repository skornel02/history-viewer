{"version":3,"sources":["Content.tsx","HistoryFiles.ts","HistoryViewer.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Topics","props","topic","selectItem","name","items","map","item","href","onClick","e","preventDefault","Content","topics","nodeToText","node","type","data","children","join","HistoryViewer","initialItem","onClickUrl","useState","html","setHtml","useEffect","undefined","headers","Headers","append","fetch","publishUrl","then","response","text","replace","React","useCallback","element","tagName","style","cursor","attribs","domToReact","parsed","parse","id","App","setTopics","historyItem","setHistoryItem","useMemo","some","match","Error","getTopicFromItem","console","log","domTree","htmlToDOM","length","htmlRoot","body","find","child","allTopics","realUrl","pushItem","push","pushTopic","childElement","topicTitle","content","startsWith","loadHistoryItems","url","matches","nextItem","endsWith","getHistoryItemById","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.52a971c4.chunk.js","sourcesContent":["import React from 'react';\r\nimport { HistoryItem, HistoryTopic } from './HistoryFiles';\r\n\r\nconst Topics: React.FunctionComponent<{\r\n    topic: HistoryTopic\r\n    selectItem: (item: HistoryItem) => void;\r\n}> = props => {\r\n    const {topic, selectItem} = props;\r\n    return (\r\n        <>\r\n            {topic.name}\r\n            <ul>\r\n                {topic.items.map(item => <li key={`navlink-${item.name}`} >\r\n                    <a href={`#${topic.name}/${item.name}`} onClick={(e) => {\r\n                        e.preventDefault();\r\n                        selectItem(item);\r\n                    }}>{item.name}</a>\r\n                </li>)}\r\n            </ul>\r\n        </>\r\n    )\r\n};\r\n\r\nconst Content: React.FunctionComponent<{\r\n    topics: HistoryTopic[];\r\n    selectItem: (item: HistoryItem) => void;\r\n}> = props => {\r\n    const {topics, selectItem} = props;\r\n    return (<>\r\n        {topics.map(topic => <Topics key={`topic-${topic.name}`} topic={topic} selectItem={selectItem}/>)}\r\n    </>)\r\n};\r\n\r\nexport default Content;","import { htmlToDOM } from \"html-react-parser\";\r\nimport {\r\n    Element,\r\n    Node,\r\n    Text\r\n} from 'domhandler';\r\n\r\nconst globalContent = \"https://docs.google.com/document/d/e/2PACX-1vQvXnfWjCvELzplW7pWR4SU63EJpGZ38b5tq7G2JKHqY6qf8RJOnabaYDSwXGsvbC8CTqq3ieXlzvnR/pub?embedded=true\"\r\n\r\nexport interface HistoryTopic {\r\n    name: string;\r\n    items: HistoryItem[];\r\n}\r\n\r\nexport interface HistoryItem {\r\n    name: string;\r\n    realUrl: string;\r\n    publishUrl: string;\r\n}\r\n\r\nconst nodeToText = (node: Node): string => {\r\n    if (node.type === \"text\") {\r\n        return (node as Text).data;\r\n    } else if (node.type === \"tag\") {\r\n        const elem = node as Element;\r\n        return elem.children.map(node => nodeToText(node)).join(\"\\n\");\r\n    } else {\r\n        return \"\";\r\n    }\r\n}\r\n\r\nexport function loadHistoryItems(): Promise<HistoryTopic[]> {\r\n    const headers = new Headers();\r\n    headers.append('pragma', 'no-cache');\r\n    headers.append('cache-control', 'no-cache');\r\n\r\n    return fetch(globalContent, {headers}).then(response => response.text())\r\n        .then(html => {\r\n            console.log(html);\r\n            const domTree = htmlToDOM(html);\r\n            if (domTree.length === 0)\r\n                throw new Error(\"Hiba a főtartalomjegyzék feldolgozása közben! html\");\r\n            \r\n            const htmlRoot = domTree[0] as Element;\r\n\r\n            console.log(htmlRoot);\r\n            const body = htmlRoot.children.find(child => child.type === \"tag\" && (child as Element).name === \"body\") as Element | undefined;\r\n            console.log(body);\r\n            if (body === undefined)\r\n                throw new Error(\"Hiba a főtartalomjegyzék feldolgozása közben! body\");\r\n\r\n            const allTopics: HistoryTopic[] = [];\r\n\r\n            let topic: HistoryTopic = {\r\n                name: \"\",\r\n                items: [],\r\n            }\r\n            let item: HistoryItem = {\r\n                name: \"\",\r\n                publishUrl: \"\",\r\n                realUrl: \"\"\r\n            }\r\n\r\n            const pushItem = () => {\r\n                if (item.name.length !== 0 && item.publishUrl.length !== 0 && item.realUrl.length !== 0) {\r\n                    topic.items.push(item);\r\n                    console.log(\"Persisting item: \", item.name);\r\n                }\r\n            }\r\n\r\n            const pushTopic = () => {\r\n                pushItem();\r\n                if (topic.name.length !== 0) {\r\n                    allTopics.push(topic);                    \r\n                    console.log(\"Persisting topic: \", topic.name);\r\n                }\r\n            }\r\n\r\n            for (const child of body.children) {\r\n                if (child.type === \"tag\") {\r\n                    const childElement = child as Element;\r\n                    if (childElement.name === \"h1\") {\r\n                        pushTopic();\r\n\r\n                        const topicTitle = nodeToText( childElement);\r\n                        topic = {\r\n                            name: topicTitle,\r\n                            items: []\r\n                        }\r\n                        item = {\r\n                            name: \"\",\r\n                            publishUrl: \"\",\r\n                            realUrl: \"\"\r\n                        }\r\n                        console.log(\"Reading topic: \", topic.name);\r\n                    } else if (childElement.name === \"h2\") {\r\n                        pushItem();\r\n                        item = {\r\n                            name: nodeToText( childElement),\r\n                            publishUrl: \"\",\r\n                            realUrl: \"\",\r\n                        }\r\n                        console.log(\"Reading item: \", item.name);\r\n                    } else if (childElement.name === \"p\") {\r\n                        const content = nodeToText( childElement)\r\n                            .replace(/\\/$/, '');\r\n                        if (content.startsWith('https://docs.google.com/document/d/e/')) {\r\n                            console.log(\"Found publish url...\")\r\n                            item.publishUrl = content;\r\n                        } else if (content.startsWith('https://docs.google.com/document/d/')) {\r\n                            console.log(\"Found real url...\")\r\n                            item.realUrl = content;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            pushTopic();\r\n\r\n            return allTopics;\r\n        })\r\n}\r\n\r\nexport function getTopicFromItem(topics: HistoryTopic[], item: HistoryItem): HistoryTopic {\r\n    for (const topic of topics) {\r\n        if (topic.items.some(match => match === item))\r\n            return topic;\r\n    }\r\n    throw Error(\"No topic found\");\r\n}\r\n\r\nexport function getHistoryItemById(topics: HistoryTopic[], id: string): HistoryItem | undefined {\r\n    for (const topic of topics) {\r\n        for (const item of topic.items) {\r\n            if (item.realUrl.endsWith(id)) \r\n                return item;\r\n        }\r\n    }\r\n    return undefined;\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { HistoryItem } from './HistoryFiles';\r\nimport \"./HistoryViewer.css\";\r\nimport parse, { DOMNode, domToReact } from 'html-react-parser';\r\nimport {\r\n    Element,\r\n} from 'domhandler';\r\n\r\nconst HistoryViewer: React.FunctionComponent<{\r\n    initialItem?: HistoryItem,\r\n    onClickUrl: (url: string) => void;\r\n}> = props => {\r\n    const { initialItem, onClickUrl } = props;\r\n    const [html, setHtml] = useState<string>();\r\n    useEffect(() => {\r\n        if (initialItem === undefined)\r\n            return;\r\n        if (html === undefined) {\r\n            const headers = new Headers();\r\n            headers.append('pragma', 'no-cache');\r\n            headers.append('cache-control', 'no-cache');\r\n\r\n            fetch(initialItem.publishUrl, {headers})\r\n                .then(response => response.text())\r\n                .then(html => {\r\n                    setHtml(html);\r\n                })\r\n        }\r\n    }, [html]);\r\n\r\n    const replace: (\r\n        domNode: DOMNode\r\n    ) => JSX.Element | undefined | null = React.useCallback((node: DOMNode) => {\r\n        if (node.type === \"tag\") {\r\n            const element: Element = node as Element;\r\n            if (element.tagName === \"a\") {\r\n                return <a style={{cursor: \"pointer\"}} onClick={() => onClickUrl(element.attribs.href)}>\r\n                    {domToReact(element.children)}\r\n                </a>\r\n            }\r\n        }\r\n        return undefined;\r\n    }, [onClickUrl]);\r\n\r\n    if (initialItem === undefined) {\r\n        return null;\r\n    }\r\n\r\n    if (html === undefined) {\r\n        return (<div>Loading</div>)\r\n    }\r\n\r\n    const parsed = parse(html, {\r\n        replace\r\n    });\r\n\r\n    return (\r\n        <div id=\"reader\">\r\n            {parsed}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HistoryViewer;","import React, { useEffect, useState } from \"react\";\nimport Content from \"./Content\";\nimport { getHistoryItemById, getTopicFromItem, HistoryItem, loadHistoryItems, HistoryTopic } from \"./HistoryFiles\";\nimport HistoryViewer from \"./HistoryViewer\";\nimport './App.css';\n\nconst App: React.FunctionComponent = () => {\n    const [topics, setTopics] = useState<HistoryTopic[]>();\n    const [historyItem, setHistoryItem] = useState<HistoryItem>();\n    const topic = React.useMemo(() => topics !== undefined && historyItem !== undefined\n        ? getTopicFromItem(topics, historyItem)\n        : undefined, [historyItem]);\n\n    const handleUrlClick = (url: string) => {\n        if (topics === undefined) return;\n\n        const matches = url.match(/id%3D(.*)&sa.*/);\n        const id = (matches ?? [\"\", \"-\"])[1];\n        console.log(id);\n        const nextItem = getHistoryItemById(topics, id);\n        console.log(nextItem);\n        if (nextItem) {\n            setHistoryItem(nextItem);\n        }\n    }\n\n    const handleSelectItem = (item: HistoryItem) => {\n        setHistoryItem(item);\n    }\n\n    useEffect(() => {\n        if (topics === undefined) {\n            loadHistoryItems()\n                .then(topics => {\n                    setTopics(topics);\n                    setHistoryItem(topics[0].items[0]);\n                });\n        }\n    }, [topics])\n\n    if (topics === undefined) {\n        return (\n            <>\n                Loading\n            </>\n        )\n    }\n\n    return (\n        <div id=\"content\">\n            <h1>\n                {topic?.name}\n            </h1>\n            <hr />\n            <HistoryViewer key={historyItem?.realUrl ?? \"not-selected\"}\n                initialItem={historyItem}\n                onClickUrl={handleUrlClick}\n            />\n            <hr />\n            <Content topics={topics} selectItem={handleSelectItem}/>\n        </div>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import(\"web-vitals\").then(\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n                getCLS(onPerfEntry);\n                getFID(onPerfEntry);\n                getFCP(onPerfEntry);\n                getLCP(onPerfEntry);\n                getTTFB(onPerfEntry);\n            }\n        );\n    }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}