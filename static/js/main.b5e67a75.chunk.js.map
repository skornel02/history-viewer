{"version":3,"sources":["Content.tsx","HistoryFiles.ts","HeightChangingFrame.tsx","CustomReaderCss.tsx","HistoryViewer.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Topics","props","topic","selectItem","useState","collapsed","setCollapsed","ListItem","button","onClick","ListItemText","color","name","Collapse","in","timeout","List","component","disablePadding","items","map","item","e","preventDefault","style","paddingLeft","Content","topics","subheader","ListSubheader","nodeToText","node","type","data","children","join","getIdFromGoogleLink","link","matches1","match","matches2","matches3","replace","HeightChangingFrame","width","handleKeyboard","registerTouchHandler","height","setHeight","iframeRef","React","createRef","handleResize","iframe","current","contentDocument","body","scrollHeight","console","log","useEffect","contentWindow","addEventListener","unregisterTouch","inter","setInterval","removeEventListener","clearInterval","ref","onLoad","scrolling","frameBorder","CustomReaderCss","id","HistoryViewer","initialItem","onClickUrl","html","setHtml","undefined","headers","Headers","append","fetch","Math","floor","random","redirect","then","response","text","useCallback","element","tagName","domToReact","attributesToProps","attribs","cursor","href","Typography","variant","margin","repairedHtml","parsed","parse","App","drawerOpen","setDrawerOpen","anchorEl","setAnchorEl","menuOpen","setMenuOpen","confirm","useConfirm","setTopics","historyItem","setHistoryItem","useMemo","some","Error","getTopicFromItem","leftItem","index","findIndex","rightItem","length","handleSelectItem","handleLeft","handleRight","domTree","htmlToDOM","allTopics","pushTopic","push","rootDiv","filter","child","childElement","topicTitle","url","loadHistoryItems","keyboardHandler","key","registerTouch","window","start","startTime","Date","touchStart","touches","touchEnd","swipeWidth","outerWidth","end","changedTouches","abs","pageY","getTime","pageX","deregisterTouch","document","display","justifyContent","alignItems","CssBaseline","position","left","top","IconButton","SwipeableDrawer","anchor","open","onClose","onOpen","align","currentTarget","Menu","keepMounted","MenuItem","ArrowLeft","ArrowRight","Divider","nextItem","getHistoryItemById","title","cancellationText","confirmationText","opened","focus","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b5e67a75.chunk.js","sourcesContent":["import { Collapse, List, ListItem, ListItemText, ListSubheader } from '@material-ui/core';\r\nimport React, { useState } from 'react';\r\nimport { HistoryItem, HistoryTopic } from './HistoryFiles';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\n\r\nconst Topics: React.FunctionComponent<{\r\n    topic: HistoryTopic\r\n    selectItem: (item: HistoryItem) => void;\r\n}> = props => {\r\n    const { topic, selectItem } = props;\r\n    const [collapsed, setCollapsed] = useState(true);\r\n\r\n    return (\r\n        <>\r\n            <ListItem button onClick={() => setCollapsed(!collapsed)}>\r\n                <ListItemText color=\"primary\">\r\n                    {topic.name}\r\n                </ListItemText>\r\n                {collapsed ? <ExpandMore /> : <ExpandLess />}\r\n            </ListItem>\r\n            <Collapse in={!collapsed} timeout=\"auto\">\r\n                <List component=\"div\" disablePadding>\r\n                    {topic.items.map(item => <ListItem button key={`navlink-${item.name}`}\r\n                        onClick={(e) => {\r\n                            e.preventDefault();\r\n                            selectItem(item);\r\n                        }}\r\n                        style={{paddingLeft: \"2rem\"}}\r\n                    >\r\n                        <ListItemText>\r\n                            {item.name}\r\n                        </ListItemText>\r\n                    </ListItem>)}\r\n                </List>\r\n            </Collapse>\r\n        </>\r\n    )\r\n};\r\n\r\nconst Content: React.FunctionComponent<{\r\n    topics: HistoryTopic[];\r\n    selectItem: (item: HistoryItem) => void;\r\n}> = props => {\r\n    const { topics, selectItem } = props;\r\n    return (<List component=\"nav\"\r\n        subheader={\r\n            <ListSubheader component=\"div\">\r\n                Jegyzetek\r\n        </ListSubheader>\r\n        }\r\n    >\r\n        {topics.map(topic => <Topics key={`topic-${topic.name}`} topic={topic} selectItem={selectItem} />)}\r\n    </List>)\r\n};\r\n\r\nexport default Content;","import { htmlToDOM } from \"html-react-parser\";\r\nimport {\r\n    Element,\r\n    Node,\r\n    Text\r\n} from 'domhandler';\r\n\r\nconst globalContent = \"https://docs.google.com/document/d/1ltZCNiI154npdUWUAHFuZC-lCZ32fYW7UVEvEru5Xxs/pub?embedded=true\"\r\n\r\nexport interface HistoryTopic {\r\n    name: string;\r\n    items: HistoryItem[];\r\n}\r\n\r\nexport interface HistoryItem {\r\n    name: string;\r\n    id: string;\r\n}\r\n\r\nconst nodeToText = (node: Node): string => {\r\n    if (node.type === \"text\") {\r\n        return (node as Text).data;\r\n    } else if (node.type === \"tag\") {\r\n        const elem = node as Element;\r\n        return elem.children.map(node => nodeToText(node)).join(\"\\n\");\r\n    } else {\r\n        return \"\";\r\n    }\r\n}\r\n\r\nexport function loadHistoryItems(): Promise<HistoryTopic[]> {\r\n    const headers = new Headers();\r\n    headers.append('pragma', 'no-cache');\r\n    headers.append('cache-control', 'no-cache');\r\n\r\n    return fetch(globalContent, { headers }).then(response => response.text())\r\n        .then(html => {\r\n            const repairedHtml = html.replace('</head>', '</head><body>') + \"</body>\";\r\n            console.log(repairedHtml);\r\n            const domTree = htmlToDOM(repairedHtml);\r\n            if (domTree.length === 0)\r\n                throw new Error(\"Hiba a főtartalomjegyzék feldolgozása közben! html\");\r\n\r\n            console.log(domTree);\r\n            const body = domTree[2] as Element;\r\n\r\n            // console.log(htmlRoot);\r\n            // const body = htmlRoot.children.find(child => child.type === \"tag\" && (child as Element).name === \"body\") as Element | undefined;\r\n            console.log(body);\r\n            if (body === undefined)\r\n                throw new Error(\"Hiba a főtartalomjegyzék feldolgozása közben! body\");\r\n\r\n            const allTopics: HistoryTopic[] = [];\r\n\r\n            let topic: HistoryTopic = {\r\n                name: \"\",\r\n                items: [],\r\n            }\r\n            let item: HistoryItem = {\r\n                name: \"\",\r\n                id: \"\"\r\n            }\r\n\r\n            const pushItem = () => {\r\n                if (item.name.length !== 0 && item.id.length !== 0) {\r\n                    topic.items.push(item);\r\n                    console.log(\"Persisting item: \", item.name);\r\n                }\r\n            }\r\n\r\n            const pushTopic = () => {\r\n                if (topic.name.length !== 0) {\r\n                    allTopics.push(topic);\r\n                    console.log(\"Persisting topic: \", topic.name);\r\n                }\r\n            }\r\n            const rootDiv = body.children.filter(child => child.type === \"tag\" && (child as Element).name == \"div\")[0] as Element;\r\n\r\n\r\n            for (const child of rootDiv.children) {\r\n                if (child.type === \"tag\") {\r\n                    const childElement = child as Element;\r\n                    if (childElement.name === \"h1\") {\r\n                        pushTopic();\r\n\r\n                        const topicTitle = nodeToText(childElement);\r\n                        topic = {\r\n                            name: topicTitle,\r\n                            items: []\r\n                        }\r\n                        item = {\r\n                            name: \"\",\r\n                            id: \"\"\r\n                        }\r\n                        console.log(\"Reading topic: \", topic.name);\r\n                    } else if (childElement.name === \"h2\") {\r\n                        console.log(childElement);\r\n                        console.log(\"Reading item: \", item.name);\r\n                        if (childElement.children.length > 0\r\n                            && childElement.children[0].type === \"tag\"\r\n                            && (childElement.children[0] as Element).children.length > 0\r\n                            && (childElement.children[0] as Element).children[0].type === \"tag\") {\r\n                            const url = ((childElement.children[0] as Element).children[0] as Element).attribs['href'] ?? \"\";\r\n                            console.log(url);\r\n                            const id = getIdFromGoogleLink(url);\r\n                            console.log(id);\r\n                            item = {\r\n                                name: nodeToText(childElement),\r\n                                id,\r\n                            }\r\n                            pushItem();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            pushTopic();\r\n\r\n            return allTopics;\r\n        })\r\n}\r\n\r\nexport function getTopicFromItem(topics: HistoryTopic[], item: HistoryItem): HistoryTopic {\r\n    for (const topic of topics) {\r\n        if (topic.items.some(match => match === item))\r\n            return topic;\r\n    }\r\n    throw Error(\"No topic found\");\r\n}\r\n\r\nexport function getHistoryItemById(topics: HistoryTopic[], id: string): HistoryItem | undefined {\r\n    for (const topic of topics) {\r\n        for (const item of topic.items) {\r\n            if (item.id === id)\r\n                return item;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport function getIdFromGoogleLink(link: string): string {\r\n    const matches1 = link.match(/d\\/(.*)&sa.*/);\r\n    const matches2 = link.match(/d\\/(.*)\\//);\r\n    const matches3 = link.match(/id%3D(.*)&sa.*/);\r\n\r\n    const matches = matches1 ?? matches2 ?? matches3 ?? [\"\", \"-\"];\r\n    const id = matches[1]\r\n        .replace(/\\/edit$/, '')\r\n        .replace(/\\//, '');\r\n    return id;\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport Frame from 'react-frame-component';\r\n\r\ninterface IProps {\r\n    children: React.ReactNode;\r\n    width: string;\r\n    handleKeyboard?: (e: KeyboardEvent) => void;    \r\n    registerTouchHandler?: (window: Window | null | undefined) => () => void;\r\n}\r\n\r\ninterface IFrame {\r\n    node: HTMLIFrameElement;\r\n}\r\n\r\ninterface FrameRef extends Frame {\r\n    node: HTMLIFrameElement;\r\n}\r\n\r\nexport const HeightChangingFrame: React.FunctionComponent<IProps> = ({\r\n    children,\r\n    width,\r\n    handleKeyboard,\r\n    registerTouchHandler = () => { return () => {/* */}}\r\n}) => {\r\n    const [height, setHeight] = useState(500);\r\n    const iframeRef = React.createRef<FrameRef>();\r\n    const handleResize = (iframe: React.RefObject<IFrame>) => {\r\n        if (\r\n            iframe.current &&\r\n            iframe.current.node.contentDocument &&\r\n            iframe.current.node.contentDocument.body.scrollHeight !== 0\r\n        ) {\r\n            console.log(iframe.current.node.contentDocument.body.scrollHeight);\r\n            setHeight(iframe.current.node.contentDocument.body.scrollHeight);\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        if (handleKeyboard) {\r\n            iframeRef.current?.node.contentWindow?.addEventListener('keydown', handleKeyboard);\r\n        }\r\n        const unregisterTouch = registerTouchHandler(iframeRef.current?.node.contentWindow);\r\n        const inter = setInterval(() => {\r\n            handleResize(iframeRef);\r\n        }, 200);\r\n        return () => {\r\n            if (handleKeyboard) {\r\n                iframeRef.current?.node.contentWindow?.removeEventListener('keydown', handleKeyboard);\r\n            }\r\n            clearInterval(inter);\r\n            unregisterTouch();\r\n        }\r\n    }, [children]);\r\n    return (\r\n        <Frame\r\n            style={{\r\n                height,\r\n            }}\r\n            width={width}\r\n            ref={iframeRef}\r\n            onLoad={() => {\r\n                handleResize(iframeRef);\r\n            }}\r\n            scrolling=\"no\"\r\n            frameBorder=\"0\"\r\n        >{children}</Frame>\r\n    );\r\n};","import React from 'react';\r\n\r\nconst css = `\r\n#contentBody {\r\n    padding: 10px;\r\n    margin: 0 auto;\r\n}\r\n`;\r\n\r\nconst CustomReaderCss: React.FunctionComponent = () => {\r\n    return (\r\n        <div id=\"ReaderCss\">\r\n            <style>\r\n                {css}\r\n            </style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CustomReaderCss;","import React, { useEffect, useState } from 'react';\r\nimport { HistoryItem } from './HistoryFiles';\r\nimport parse, { attributesToProps, DOMNode, domToReact } from 'html-react-parser';\r\nimport {\r\n    Element,\r\n} from 'domhandler';\r\nimport { HeightChangingFrame } from './HeightChangingFrame';\r\nimport CustomReaderCss from './CustomReaderCss';\r\nimport { Typography } from '@material-ui/core';\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nconst HistoryViewer: React.FunctionComponent<{\r\n    initialItem?: HistoryItem,\r\n    onClickUrl: (url: string) => void;\r\n    handleKeyboard?: (e: KeyboardEvent) => void;\r\n    registerTouchHandler?: (window: Window | null | undefined) => () => void;\r\n}> = props => {\r\n    const { initialItem, onClickUrl, handleKeyboard, registerTouchHandler } = props;\r\n    const [html, setHtml] = useState<string>();\r\n    useEffect(() => {\r\n        if (initialItem === undefined)\r\n            return;\r\n        if (html === undefined) {\r\n            const headers = new Headers();\r\n            headers.append('pragma', 'no-cache');\r\n            headers.append('cache-control', 'no-cache');\r\n\r\n            fetch(`https://docs.google.com/document/u/1/d/${initialItem.id}/pub?embedded=true&r=${Math.floor(Math.random() * 10000)}`, { headers, redirect: 'manual' })\r\n                .then(response => response.text())\r\n                .then(html => {\r\n                    console.log(`Loading ${initialItem.name}, url = ${(`https://docs.google.com/document/u/1/d/${initialItem.id}/pub?embedded=true&r=${Math.floor(Math.random() * 10000)}`)}, result html: `, html);\r\n                    setHtml(html);\r\n                })\r\n        }\r\n    }, [html]);\r\n\r\n    const replace: (\r\n        domNode: DOMNode\r\n    ) => JSX.Element | undefined | null = React.useCallback((node: DOMNode) => {\r\n        if (node.type === \"tag\") {\r\n            const element: Element = node as Element;\r\n            if (element.tagName === \"html\" || element.tagName === \"head\") {\r\n                return <>{domToReact(element.children, { replace })}</>;\r\n            }\r\n            if (element.tagName === \"body\") {\r\n                const props = attributesToProps(element.attribs);\r\n                return <div id=\"contentBody\" {...props}>\r\n                    {domToReact(element.children, { replace })}\r\n                </div>\r\n            }\r\n            if (element.tagName === \"a\") {\r\n                return <a style={{ cursor: \"pointer\" }} onClick={() => onClickUrl(element.attribs.href)}>\r\n                    {domToReact(element.children, { replace })}\r\n                </a>\r\n            }\r\n        }\r\n        return undefined;\r\n    }, [onClickUrl]);\r\n\r\n    if (initialItem === undefined) {\r\n        return <Typography variant=\"body1\">Válassz ki egy témakört...</Typography>;\r\n    }\r\n\r\n    if (html === undefined) {\r\n        return (\r\n            <div style={{margin: \"0 auto\", width: \"100px\"}}>\r\n                <Loader type=\"Watch\" color=\"#00BFFF\" width=\"100px\"/>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const repairedHtml = html.replace('</head>', '</head><body>') + \"</body>\";\r\n    const parsed = parse(repairedHtml, {\r\n        replace\r\n    });\r\n\r\n    return (\r\n        <HeightChangingFrame width=\"100%\" handleKeyboard={handleKeyboard} registerTouchHandler={registerTouchHandler}>\r\n            <CustomReaderCss />\r\n            {parsed}\r\n        </HeightChangingFrame>\r\n    )\r\n}\r\n\r\nexport default HistoryViewer;","import React, { useEffect, useState } from \"react\";\nimport Content from \"./Content\";\nimport { getHistoryItemById, getTopicFromItem, HistoryItem, loadHistoryItems, HistoryTopic, getIdFromGoogleLink } from \"./HistoryFiles\";\nimport HistoryViewer from \"./HistoryViewer\";\nimport './App.css';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { Divider, IconButton, MenuItem, SwipeableDrawer, Typography, Menu } from \"@material-ui/core\";\nimport { Menu as MenuIcon, ArrowLeft, ArrowRight } from '@material-ui/icons';\nimport Loader from \"react-loader-spinner\";\nimport { useConfirm } from \"material-ui-confirm\";\n\nconst App: React.FunctionComponent = () => {\n    const [drawerOpen, setDrawerOpen] = useState(false);\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n    const [menuOpen, setMenuOpen] = useState(false);\n    const confirm = useConfirm();\n    const [topics, setTopics] = useState<HistoryTopic[]>();\n    const [historyItem, setHistoryItem] = useState<HistoryItem>();\n    const topic: HistoryTopic | undefined = React.useMemo(() => topics !== undefined && historyItem !== undefined\n        ? getTopicFromItem(topics, historyItem)\n        : undefined, [historyItem]);\n\n    const leftItem: HistoryItem | undefined = React.useMemo(() => {\n        if (topic === undefined)\n            return undefined;\n        const index = topic.items.findIndex(match => match === historyItem);\n        if (index < 1)\n            return undefined;\n\n        return topic.items[index - 1];\n    }, [historyItem])\n\n    const rightItem: HistoryItem | undefined = React.useMemo(() => {\n        if (topic === undefined)\n            return undefined;\n        const index = topic.items.findIndex(match => match === historyItem);\n        if (index >= topic.items.length)\n            return undefined;\n\n        return topic.items[index + 1];\n    }, [historyItem])\n\n    const handleUrlClick = (url: string) => {\n        if (topics === undefined) return;\n\n        const id = getIdFromGoogleLink(url);\n        const nextItem = getHistoryItemById(topics, id);\n        if (nextItem) {\n            setHistoryItem(nextItem);\n        } else {\n            confirm({\n                title: \"Biztos megszeretné nyitni ezt a külső hivatkozást?\",\n                cancellationText: \"Nem\",\n                confirmationText: \"Igen\",\n            }).then(() => {\n                const opened = window.open(url, '_blank');\n                if (opened) {\n                    opened.focus();\n                }\n            });\n        }\n    }\n\n    const handleSelectItem = React.useCallback((item: HistoryItem) => {\n        setHistoryItem(item);\n    }, []);\n\n    const handleLeft = React.useCallback(() => {\n        if (leftItem === undefined) return;\n        setHistoryItem(leftItem);\n    }, [leftItem]);\n\n    const handleRight = React.useCallback(() => {\n        if (rightItem === undefined) return;\n        setHistoryItem(rightItem);\n    }, [rightItem]);\n\n    useEffect(() => {\n        if (topics === undefined) {\n            loadHistoryItems()\n                .then(topics => {\n                    setTopics(topics);\n                    setHistoryItem(topics[0].items[0]);\n                });\n        }\n    }, [topics])\n\n    const keyboardHandler = React.useCallback((e: KeyboardEvent) => {\n        if (e.key === \"ArrowLeft\") {\n            handleLeft();\n        } else if (e.key === \"ArrowRight\") {\n            handleRight();\n        }\n    }, [handleLeft, handleRight])\n\n    const registerTouch = React.useCallback((window: Window | null | undefined): () => void => {\n        if (window === undefined || window == null) {\n            return () => {\n                //\n            };\n        }\n        let start: Touch | null = null;\n        let startTime = new Date();\n\n        const touchStart = (e: TouchEvent) => {\n            if (e.touches.length > 0) {\n                start = e.touches.item(0);\n                startTime = new Date()\n            } else {\n                start = null;\n            }\n        };\n        const touchEnd = (e: TouchEvent) => {\n            const swipeWidth = window.outerWidth * 0.6;\n            if (start !== null) {\n                const end = e.changedTouches.item(0);\n                if (end === null) return;\n\n                if (Math.abs(start.pageY - end.pageY) > 10) return;\n                if (new Date().getTime() - startTime.getTime() > 1000) return;\n\n                if (start.pageX + swipeWidth < end.pageX) {\n                    handleLeft();\n                }\n                if (start.pageX - swipeWidth > end.pageX) {\n                    handleRight();\n                }\n            }\n        };\n\n        window.addEventListener('touchstart', touchStart)\n        window.addEventListener('touchend', touchEnd)\n        return () => {\n            window.removeEventListener('touchstart', touchStart);\n            window.removeEventListener('touchend', touchEnd);\n        }\n    }, [handleLeft, handleRight]);\n\n    useEffect(() => {\n        const deregisterTouch = registerTouch(window);\n        document.addEventListener('keydown', keyboardHandler);\n        return () => {\n            document.removeEventListener('keydown', keyboardHandler);\n            deregisterTouch();\n        }\n    }, [keyboardHandler])\n\n    if (topics === undefined) {\n        return (\n            <div style={{ width: \"100vw\", height: \"100vh\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\n                <Loader type=\"TailSpin\" color=\"#00BFFF\" width=\"10vw\" />\n            </div>\n        )\n    }\n\n    return (\n        <>\n            <CssBaseline />\n            <div style={{ position: \"absolute\", left: 0, top: 0 }}>\n                <IconButton onClick={() => setDrawerOpen(true)}>\n                    <MenuIcon />\n                </IconButton>\n            </div>\n            <SwipeableDrawer\n                anchor={\"left\"}\n                open={drawerOpen}\n                onClose={() => setDrawerOpen(false)}\n                onOpen={() => setDrawerOpen(true)}\n            >\n                <Content topics={topics} selectItem={handleSelectItem} />\n            </SwipeableDrawer>\n            <div id=\"content\">\n                <Typography variant=\"h2\" align=\"center\" onClick={(e) => {\n                    setAnchorEl(e.currentTarget);\n                    setMenuOpen(true);\n                }}>\n                    {topic?.name}\n                </Typography>\n                <Menu anchorEl={anchorEl} open={menuOpen} onClose={() => setMenuOpen(false)} keepMounted>\n                    {topics.map(topic => <MenuItem key={`menu-${topic.name}`} onClick={() => {\n                        handleSelectItem(topic.items[0]);\n                        setMenuOpen(false);\n                    }}>\n                        {topic.name}\n                    </MenuItem>)}\n                </Menu>\n                <div style={{ display: \"flex\" }}>\n                    <div style={{ width: \"50%\" }}>\n                        <div style={{ margin: \"0 auto 0 0\", width: \"fit-content\", display: \"flex\", alignItems: \"center\" }}>\n                            <IconButton onClick={handleLeft} style={{ display: leftItem === undefined ? \"none\" : \"inherit\" }}>\n                                <ArrowLeft />\n                            </IconButton>\n                            <Typography variant=\"body1\">\n                                {leftItem?.name}\n                            </Typography>\n                        </div>\n                    </div>\n                    <div style={{ width: \"50%\" }}>\n                        <div style={{ margin: \"0 0 0 auto\", width: \"fit-content\", display: \"flex\", alignItems: \"center\" }}>\n                            <Typography variant=\"body1\">\n                                {rightItem?.name}\n                            </Typography>\n                            <IconButton onClick={handleRight} style={{ display: rightItem === undefined ? \"none\" : \"inherit\" }}>\n                                <ArrowRight />\n                            </IconButton>\n                        </div>\n                    </div>\n                </div>\n                <Divider />\n                <HistoryViewer key={historyItem?.id ?? \"not-selected\"}\n                    initialItem={historyItem}\n                    onClickUrl={handleUrlClick}\n                    handleKeyboard={keyboardHandler}\n                    registerTouchHandler={registerTouch}\n                />\n                <Divider />\n            </div>\n        </>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import(\"web-vitals\").then(\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n                getCLS(onPerfEntry);\n                getFID(onPerfEntry);\n                getFCP(onPerfEntry);\n                getLCP(onPerfEntry);\n                getTTFB(onPerfEntry);\n            }\n        );\n    }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { ConfirmProvider } from 'material-ui-confirm';\n\nReactDOM.render(\n    <React.StrictMode>\n        <ConfirmProvider>\n            <App />\n        </ConfirmProvider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}