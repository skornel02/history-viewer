{"version":3,"sources":["Content.tsx","HistoryFiles.ts","HeightChangingFrame.tsx","CustomReaderCss.tsx","HistoryViewer.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Topics","props","topic","selectItem","name","items","map","item","href","onClick","e","preventDefault","Content","topics","nodeToText","node","type","data","children","join","getIdFromGoogleLink","link","matches1","match","matches2","matches3","replace","HeightChangingFrame","width","handleKeyboard","useState","height","setHeight","iframeRef","React","createRef","handleResize","iframe","current","contentDocument","body","scrollHeight","console","log","useEffect","contentWindow","addEventListener","inter","setInterval","removeEventListener","clearInterval","style","ref","onLoad","scrolling","frameBorder","CustomReaderCss","id","HistoryViewer","initialItem","onClickUrl","html","setHtml","undefined","headers","Headers","append","fetch","Math","floor","random","redirect","then","response","text","useCallback","element","tagName","domToReact","attributesToProps","attribs","cursor","Typography","variant","margin","color","parsed","parse","App","drawerOpen","setDrawerOpen","setTopics","historyItem","setHistoryItem","useMemo","some","Error","getTopicFromItem","leftItem","index","findIndex","rightItem","length","handleSelectItem","handleLeft","handleRight","domTree","htmlToDOM","htmlRoot","find","child","allTopics","pushTopic","push","childElement","topicTitle","url","loadHistoryItems","keyboardHandler","key","document","CssBaseline","float","IconButton","Menu","SwipeableDrawer","anchor","open","onClose","onOpen","align","display","alignItems","ArrowLeft","ArrowRight","Divider","nextItem","getHistoryItemById","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"mOAGMA,EAGD,SAAAC,GAAU,IACJC,EAAqBD,EAArBC,MAAOC,EAAcF,EAAdE,WACd,OACI,qCACKD,EAAME,KACP,6BACKF,EAAMG,MAAMC,KAAI,SAAAC,GAAI,OAAI,6BACrB,mBAAGC,KAAI,WAAMN,EAAME,KAAZ,YAAoBG,EAAKH,MAAQK,QAAS,SAACC,GAC9CA,EAAEC,iBACFR,EAAWI,IAFf,SAGIA,EAAKH,QAJY,kBAAoBG,EAAKH,gBAqBnDQ,EAPV,SAAAX,GAAU,IACJY,EAAsBZ,EAAtBY,OAAQV,EAAcF,EAAdE,WACf,OAAQ,mCACHU,EAAOP,KAAI,SAAAJ,GAAK,OAAI,cAAC,EAAD,CAAoCA,MAAOA,EAAOC,WAAYA,GAA9D,gBAAsBD,EAAME,a,gBCVnDU,EAAa,SAAbA,EAAcC,GAChB,MAAkB,SAAdA,EAAKC,KACGD,EAAcE,KACD,QAAdF,EAAKC,KACCD,EACDG,SAASZ,KAAI,SAAAS,GAAI,OAAID,EAAWC,MAAOI,KAAK,MAEjD,IA6GR,SAASC,EAAoBC,GAAuB,IAAD,IAChDC,EAAWD,EAAKE,MAAM,gBACtBC,EAAWH,EAAKE,MAAM,aACtBE,EAAWJ,EAAKE,MAAM,kBAM5B,OAJa,2BAAGD,QAAH,IAAGA,IAAYE,SAAf,QAA2BC,SAA3B,QAAuC,CAAC,GAAI,MACtC,GACdC,QAAQ,UAAW,IACnBA,QAAQ,KAAM,I,6BC9HVC,EAAuD,SAAC,GAI9D,IAHHT,EAGE,EAHFA,SACAU,EAEE,EAFFA,MACAC,EACE,EADFA,eACE,EAC0BC,mBAAS,KADnC,mBACKC,EADL,KACaC,EADb,KAEIC,EAAYC,IAAMC,YAClBC,EAAe,SAACC,GAEdA,EAAOC,SACPD,EAAOC,QAAQvB,KAAKwB,iBACsC,IAA1DF,EAAOC,QAAQvB,KAAKwB,gBAAgBC,KAAKC,eAEzCC,QAAQC,IAAIN,EAAOC,QAAQvB,KAAKwB,gBAAgBC,KAAKC,cACrDT,EAAUK,EAAOC,QAAQvB,KAAKwB,gBAAgBC,KAAKC,gBAiB3D,OAdAG,qBAAU,WACe,IAAD,IAAhBf,IACA,UAAAI,EAAUK,eAAV,mBAAmBvB,KAAK8B,qBAAxB,SAAuCC,iBAAiB,UAAWjB,IAEvE,IAAMkB,EAAQC,aAAY,WACtBZ,EAAaH,KACd,KACH,OAAO,WACkB,IAAD,IAAhBJ,IACA,UAAAI,EAAUK,eAAV,mBAAmBvB,KAAK8B,qBAAxB,SAAuCI,oBAAoB,UAAWpB,IAE1EqB,cAAcH,MAEnB,CAAC7B,IAEA,cAAC,IAAD,CACIiC,MAAO,CACHpB,UAEJH,MAAOA,EACPwB,IAAKnB,EACLoB,OAAQ,WACJjB,EAAaH,IAEjBqB,UAAU,KACVC,YAAY,IAVhB,SAWErC,KCzCKsC,EAVkC,WAC7C,OACI,qBAAKC,GAAG,YAAR,SACI,gCAVH,sE,kCCgFMC,EAlEV,SAAAzD,GAAU,IACH0D,EAA4C1D,EAA5C0D,YAAaC,EAA+B3D,EAA/B2D,WAAY/B,EAAmB5B,EAAnB4B,eADvB,EAEcC,qBAFd,mBAEH+B,EAFG,KAEGC,EAFH,KAGVlB,qBAAU,WACN,QAAoBmB,IAAhBJ,QAESI,IAATF,EAAoB,CACpB,IAAMG,EAAU,IAAIC,QACpBD,EAAQE,OAAO,SAAU,YACzBF,EAAQE,OAAO,gBAAiB,YAEhCC,MAAM,0CAAD,OAA2CR,EAAYF,GAAvD,gCAAiFW,KAAKC,MAAsB,IAAhBD,KAAKE,WAAqB,CAAEN,UAASO,SAAU,WAC3IC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAX,GACFC,EAAQD,SAGrB,CAACA,IAEJ,IAAMnC,EAEgCQ,IAAMyC,aAAY,SAAC5D,GACrD,GAAkB,QAAdA,EAAKC,KAAgB,CACrB,IAAM4D,EAAmB7D,EACzB,GAAwB,SAApB6D,EAAQC,SAA0C,SAApBD,EAAQC,QACtC,OAAO,mCAAGC,YAAWF,EAAQ1D,SAAU,CAAEQ,cAE7C,GAAwB,SAApBkD,EAAQC,QAAoB,CAC5B,IAAM5E,EAAQ8E,YAAkBH,EAAQI,SACxC,OAAO,6CAAKvB,GAAG,eAAkBxD,GAA1B,aACF6E,YAAWF,EAAQ1D,SAAU,CAAEQ,eAGxC,GAAwB,MAApBkD,EAAQC,QACR,OAAO,mBAAG1B,MAAO,CAAE8B,OAAQ,WAAaxE,QAAS,kBAAMmD,EAAWgB,EAAQI,QAAQxE,OAA3E,SACFsE,YAAWF,EAAQ1D,SAAU,CAAEQ,iBAK7C,CAACkC,IAEJ,QAAoBG,IAAhBJ,EACA,OAAO,cAACuB,EAAA,EAAD,CAAYC,QAAQ,QAApB,iDAGX,QAAapB,IAATF,EACA,OACI,qBAAKV,MAAO,CAACiC,OAAQ,SAAUxD,MAAO,SAAtC,SACI,cAAC,IAAD,CAAQZ,KAAK,QAAQqE,MAAM,UAAUzD,MAAM,YAKvD,IAAM0D,EAASC,YAAM1B,EAAM,CACvBnC,YAGJ,OACI,eAAC,EAAD,CAAqBE,MAAM,OAAOC,eAAgBA,EAAlD,UACI,cAAC,EAAD,IACCyD,M,uECwEEE,EA5IsB,WAAO,IAAD,IACH1D,oBAAS,GADN,mBAChC2D,EADgC,KACpBC,EADoB,OAEX5D,qBAFW,mBAEhCjB,EAFgC,KAExB8E,EAFwB,OAGD7D,qBAHC,mBAGhC8D,EAHgC,KAGnBC,EAHmB,KAIjC3F,EAAkCgC,IAAM4D,SAAQ,uBAAiB/B,IAAXlD,QAAwCkD,IAAhB6B,EJwGjF,SAA0B/E,EAAwBN,GAAkC,IAAD,gBAClEM,GADkE,IACtF,2BAA4B,CAAC,IAAlBX,EAAiB,QACxB,GAAIA,EAAMG,MAAM0F,MAAK,SAAAxE,GAAK,OAAIA,IAAUhB,KACpC,OAAOL,GAHuE,8BAKtF,MAAM8F,MAAM,kBI5GNC,CAAiBpF,EAAQ+E,QACzB7B,IAAW,CAAC6B,IAEZM,EAAoChE,IAAM4D,SAAQ,WACpD,QAAc/B,IAAV7D,EAAJ,CAEA,IAAMiG,EAAQjG,EAAMG,MAAM+F,WAAU,SAAA7E,GAAK,OAAIA,IAAUqE,KACvD,KAAIO,EAAQ,GAGZ,OAAOjG,EAAMG,MAAM8F,EAAQ,MAC5B,CAACP,IAEES,EAAqCnE,IAAM4D,SAAQ,WACrD,QAAc/B,IAAV7D,EAAJ,CAEA,IAAMiG,EAAQjG,EAAMG,MAAM+F,WAAU,SAAA7E,GAAK,OAAIA,IAAUqE,KACvD,KAAIO,GAASjG,EAAMG,MAAMiG,QAGzB,OAAOpG,EAAMG,MAAM8F,EAAQ,MAC5B,CAACP,IAaEW,EAAoBrE,IAAMyC,aAAY,SAACpE,GACzCsF,EAAetF,KAChB,IAEGiG,EAAatE,IAAMyC,aAAY,gBAChBZ,IAAbmC,GACJL,EAAeK,KAChB,CAACA,IAEEO,EAAcvE,IAAMyC,aAAY,gBAChBZ,IAAdsC,GACJR,EAAeQ,KAChB,CAACA,IAEJzD,qBAAU,gBACSmB,IAAXlD,GJjCL,WACH,IAAMmD,EAAU,IAAIC,QAIpB,OAHAD,EAAQE,OAAO,SAAU,YACzBF,EAAQE,OAAO,gBAAiB,YAEzBC,MA5BW,oGA4BU,CAACH,YAAUQ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC5DF,MAAK,SAAAX,GACFnB,QAAQC,IAAIkB,GACZ,IAAM6C,EAAUC,YAAU9C,GAC1B,GAAuB,IAAnB6C,EAAQJ,OACR,MAAM,IAAIN,MAAM,oEAEpB,IAAMY,EAAWF,EAAQ,GAEzBhE,QAAQC,IAAIiE,GACZ,IAAMpE,EAAOoE,EAAS1F,SAAS2F,MAAK,SAAAC,GAAK,MAAmB,QAAfA,EAAM9F,MAA8C,SAA3B8F,EAAkB1G,QAExF,GADAsC,QAAQC,IAAIH,QACCuB,IAATvB,EACA,MAAM,IAAIwD,MAAM,oEAEpB,IAdU,EAcJe,EAA4B,GAE9B7G,EAAsB,CACtBE,KAAM,GACNC,MAAO,IAEPE,EAAoB,CACpBH,KAAM,GACNqD,GAAI,IAUFuD,EAAY,WACY,IAAtB9G,EAAME,KAAKkG,SACXS,EAAUE,KAAK/G,GACfwC,QAAQC,IAAI,qBAAsBzC,EAAME,QAnCtC,cAuCUoC,EAAKtB,UAvCf,IAuCV,2BAAmC,CAAC,IAAzB4F,EAAwB,QAC/B,GAAmB,QAAfA,EAAM9F,KAAgB,CACtB,IAAMkG,EAAeJ,EACrB,GAA0B,OAAtBI,EAAa9G,KAAe,CAC5B4G,IAEA,IAAMG,EAAarG,EAAYoG,GAC/BhH,EAAQ,CACJE,KAAM+G,EACN9G,MAAO,IAEXE,EAAO,CACHH,KAAM,GACNqD,GAAI,IAERf,QAAQC,IAAI,kBAAmBzC,EAAME,WAClC,GAA0B,OAAtB8G,EAAa9G,OACpBsC,QAAQC,IAAIuE,GACZxE,QAAQC,IAAI,iBAAkBpC,EAAKH,MAC/B8G,EAAahG,SAASoF,OAAS,GACM,QAAlCY,EAAahG,SAAS,GAAGF,MACvBkG,EAAahG,SAAS,GAAeA,SAASoF,OAAS,GACE,QAA1DY,EAAahG,SAAS,GAAeA,SAAS,GAAGF,MAAgB,CAAC,IAAD,EAC/DoG,EAAG,UAAKF,EAAahG,SAAS,GAAeA,SAAS,GAAe8D,QAA/D,YAAH,QAAqF,GAC9FtC,QAAQC,IAAIyE,GACZ,IAAM3D,EAAKrC,EAAoBgG,GAC/B1E,QAAQC,IAAIc,GAvCC,KAwCblD,EAAO,CACHH,KAAMU,EAAYoG,GAClBzD,OA1CPrD,KAAKkG,QAAmC,IAAnB/F,EAAKkD,GAAG6C,SAClCpG,EAAMG,MAAM4G,KAAK1G,GACjBmC,QAAQC,IAAI,oBAAqBpC,EAAKH,UA5BpC,8BA6EV,OAFA4G,IAEOD,KIjDPM,GACK7C,MAAK,SAAA3D,GACF8E,EAAU9E,GACVgF,EAAehF,EAAO,GAAGR,MAAM,SAG5C,CAACQ,IAEJ,IAAMyG,EAAkBpF,IAAMyC,aAAY,SAACjE,GACzB,cAAVA,EAAE6G,IACFf,IACiB,eAAV9F,EAAE6G,KACTd,MAEL,CAACD,EAAYC,IAShB,OAPA7D,qBAAU,WAEN,OADA4E,SAAS1E,iBAAiB,UAAWwE,GAC9B,WACHE,SAASvE,oBAAoB,UAAWqE,MAE7C,CAACA,SAEWvD,IAAXlD,EAEI,+CAOJ,qCACI,cAAC4G,EAAA,EAAD,IACA,qBAAKtE,MAAO,CAAEuE,MAAO,QAArB,SACI,cAACC,EAAA,EAAD,CAAYlH,QAAS,kBAAMiF,GAAc,IAAzC,SACI,cAACkC,EAAA,EAAD,QAGR,cAACC,EAAA,EAAD,CACIC,OAAQ,OACRC,KAAMtC,EACNuC,QAAS,kBAAMtC,GAAc,IAC7BuC,OAAQ,kBAAMvC,GAAc,IAJhC,SAMI,cAAC,EAAD,CAAS7E,OAAQA,EAAQV,WAAYoG,MAEzC,sBAAK9C,GAAG,UAAR,UACI,cAACyB,EAAA,EAAD,CAAYC,QAAQ,KAAK+C,MAAM,SAA/B,gBACKhI,QADL,IACKA,OADL,EACKA,EAAOE,OAEZ,sBAAK+C,MAAO,CAAEgF,QAAS,QAAvB,UACI,qBAAKhF,MAAO,CAAEvB,MAAO,OAArB,SACI,sBAAKuB,MAAO,CAAEiC,OAAQ,aAAcxD,MAAO,cAAeuG,QAAS,OAAQC,WAAY,UAAvF,UACI,cAACT,EAAA,EAAD,CAAYlH,QAAS+F,EAAarD,MAAO,CAACgF,aAAsBpE,IAAbmC,EAAyB,OAAS,WAArF,SACI,cAACmC,EAAA,EAAD,MAEJ,cAACnD,EAAA,EAAD,CAAYC,QAAQ,QAApB,gBACKe,QADL,IACKA,OADL,EACKA,EAAU9F,YAIvB,qBAAK+C,MAAO,CAAEvB,MAAO,OAArB,SACI,sBAAKuB,MAAO,CAAEiC,OAAQ,aAAcxD,MAAO,cAAeuG,QAAS,OAAQC,WAAY,UAAvF,UACI,cAAClD,EAAA,EAAD,CAAYC,QAAQ,QAApB,gBACKkB,QADL,IACKA,OADL,EACKA,EAAWjG,OAEhB,cAACuH,EAAA,EAAD,CAAYlH,QAASgG,EAAatD,MAAO,CAACgF,aAAuBpE,IAAdsC,EAA0B,OAAS,WAAtF,SACI,cAACiC,EAAA,EAAD,cAKhB,cAACC,EAAA,EAAD,IACA,cAAC,EAAD,CACI5E,YAAaiC,EACbhC,WAvGO,SAACwD,GACpB,QAAerD,IAAXlD,EAAJ,CAEA,IAAM4C,EAAKrC,EAAoBgG,GACzBoB,EJoFP,SAA4B3H,EAAwB4C,GAAsC,IAAD,gBACxE5C,GADwE,IAC5F,2BAA4B,CAAC,IAAD,EAAjBX,EAAiB,sBACLA,EAAMG,OADD,IACxB,2BAAgC,CAAC,IAAtBE,EAAqB,QAC5B,GAAIA,EAAKkD,KAAOA,EACZ,OAAOlD,GAHS,gCADgE,+BIpFvEkI,CAAmB5H,EAAQ4C,GAC5Cf,QAAQC,IAAI6F,GACRA,GACA3C,EAAe2C,KAiGP3G,eAAgByF,GAHpB,iBAAoB1B,QAApB,IAAoBA,OAApB,EAAoBA,EAAanC,UAAjC,QAAuC,gBAKvC,cAAC8E,EAAA,EAAD,WC/HDG,EAdS,SAACC,GACjBA,GAAeA,aAAuBC,UACtC,8BAAqBpE,MACjB,YAAkD,IAA/CqE,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC/BJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCJxBO,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,EAAD,MAEJ5B,SAAS6B,eAAe,SAG5BX,M","file":"static/js/main.ccb4f52e.chunk.js","sourcesContent":["import React from 'react';\r\nimport { HistoryItem, HistoryTopic } from './HistoryFiles';\r\n\r\nconst Topics: React.FunctionComponent<{\r\n    topic: HistoryTopic\r\n    selectItem: (item: HistoryItem) => void;\r\n}> = props => {\r\n    const {topic, selectItem} = props;\r\n    return (\r\n        <>\r\n            {topic.name}\r\n            <ul>\r\n                {topic.items.map(item => <li key={`navlink-${item.name}`} >\r\n                    <a href={`#${topic.name}/${item.name}`} onClick={(e) => {\r\n                        e.preventDefault();\r\n                        selectItem(item);\r\n                    }}>{item.name}</a>\r\n                </li>)}\r\n            </ul>\r\n        </>\r\n    )\r\n};\r\n\r\nconst Content: React.FunctionComponent<{\r\n    topics: HistoryTopic[];\r\n    selectItem: (item: HistoryItem) => void;\r\n}> = props => {\r\n    const {topics, selectItem} = props;\r\n    return (<>\r\n        {topics.map(topic => <Topics key={`topic-${topic.name}`} topic={topic} selectItem={selectItem}/>)}\r\n    </>)\r\n};\r\n\r\nexport default Content;","import { htmlToDOM } from \"html-react-parser\";\r\nimport {\r\n    Element,\r\n    Node,\r\n    Text\r\n} from 'domhandler';\r\n\r\nconst globalContent = \"https://docs.google.com/document/d/1ltZCNiI154npdUWUAHFuZC-lCZ32fYW7UVEvEru5Xxs/pub?embedded=true\"\r\n\r\nexport interface HistoryTopic {\r\n    name: string;\r\n    items: HistoryItem[];\r\n}\r\n\r\nexport interface HistoryItem {\r\n    name: string;\r\n    id: string;\r\n}\r\n\r\nconst nodeToText = (node: Node): string => {\r\n    if (node.type === \"text\") {\r\n        return (node as Text).data;\r\n    } else if (node.type === \"tag\") {\r\n        const elem = node as Element;\r\n        return elem.children.map(node => nodeToText(node)).join(\"\\n\");\r\n    } else {\r\n        return \"\";\r\n    }\r\n}\r\n\r\nexport function loadHistoryItems(): Promise<HistoryTopic[]> {\r\n    const headers = new Headers();\r\n    headers.append('pragma', 'no-cache');\r\n    headers.append('cache-control', 'no-cache');\r\n\r\n    return fetch(globalContent, {headers}).then(response => response.text())\r\n        .then(html => {\r\n            console.log(html);\r\n            const domTree = htmlToDOM(html);\r\n            if (domTree.length === 0)\r\n                throw new Error(\"Hiba a főtartalomjegyzék feldolgozása közben! html\");\r\n            \r\n            const htmlRoot = domTree[0] as Element;\r\n\r\n            console.log(htmlRoot);\r\n            const body = htmlRoot.children.find(child => child.type === \"tag\" && (child as Element).name === \"body\") as Element | undefined;\r\n            console.log(body);\r\n            if (body === undefined)\r\n                throw new Error(\"Hiba a főtartalomjegyzék feldolgozása közben! body\");\r\n\r\n            const allTopics: HistoryTopic[] = [];\r\n\r\n            let topic: HistoryTopic = {\r\n                name: \"\",\r\n                items: [],\r\n            }\r\n            let item: HistoryItem = {\r\n                name: \"\",\r\n                id: \"\"\r\n            }\r\n\r\n            const pushItem = () => {\r\n                if (item.name.length !== 0 && item.id.length !== 0) {\r\n                    topic.items.push(item);\r\n                    console.log(\"Persisting item: \", item.name);\r\n                }\r\n            }\r\n\r\n            const pushTopic = () => {\r\n                if (topic.name.length !== 0) {\r\n                    allTopics.push(topic);                    \r\n                    console.log(\"Persisting topic: \", topic.name);\r\n                }\r\n            }\r\n\r\n            for (const child of body.children) {\r\n                if (child.type === \"tag\") {\r\n                    const childElement = child as Element;\r\n                    if (childElement.name === \"h1\") {\r\n                        pushTopic();\r\n\r\n                        const topicTitle = nodeToText( childElement);\r\n                        topic = {\r\n                            name: topicTitle,\r\n                            items: []\r\n                        }\r\n                        item = {\r\n                            name: \"\",\r\n                            id: \"\"\r\n                        }\r\n                        console.log(\"Reading topic: \", topic.name);\r\n                    } else if (childElement.name === \"h2\") {\r\n                        console.log(childElement);\r\n                        console.log(\"Reading item: \", item.name);\r\n                        if (childElement.children.length > 0 \r\n                            && childElement.children[0].type === \"tag\"\r\n                            &&  (childElement.children[0] as Element).children.length > 0\r\n                            && (childElement.children[0] as Element).children[0].type === \"tag\") {\r\n                            const url = ((childElement.children[0] as Element).children[0] as Element).attribs['href'] ?? \"\";\r\n                            console.log(url);\r\n                            const id = getIdFromGoogleLink(url);\r\n                            console.log(id);\r\n                            item = {\r\n                                name: nodeToText( childElement),\r\n                                id,\r\n                            }\r\n                            pushItem();\r\n                        }\r\n                    } \r\n                }\r\n            }\r\n            pushTopic();\r\n\r\n            return allTopics;\r\n        })\r\n}\r\n\r\nexport function getTopicFromItem(topics: HistoryTopic[], item: HistoryItem): HistoryTopic {\r\n    for (const topic of topics) {\r\n        if (topic.items.some(match => match === item))\r\n            return topic;\r\n    }\r\n    throw Error(\"No topic found\");\r\n}\r\n\r\nexport function getHistoryItemById(topics: HistoryTopic[], id: string): HistoryItem | undefined {\r\n    for (const topic of topics) {\r\n        for (const item of topic.items) {\r\n            if (item.id === id) \r\n                return item;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport function getIdFromGoogleLink(link: string): string {    \r\n    const matches1 = link.match(/d\\/(.*)&sa.*/);\r\n    const matches2 = link.match(/d\\/(.*)\\//);\r\n    const matches3 = link.match(/id%3D(.*)&sa.*/);\r\n\r\n    const matches = matches1 ?? matches2 ?? matches3 ?? [\"\", \"-\"];\r\n    const id = matches[1]\r\n        .replace(/\\/edit$/, '')\r\n        .replace(/\\//, '');\r\n    return id;\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport Frame from 'react-frame-component';\r\n\r\ninterface IProps {\r\n    children: React.ReactNode;\r\n    width: string;\r\n    handleKeyboard?: (e: KeyboardEvent) => void;\r\n}\r\n\r\ninterface IFrame {\r\n    node: HTMLIFrameElement;\r\n}\r\n\r\ninterface FrameRef extends Frame {\r\n    node: HTMLIFrameElement;\r\n}\r\n\r\nexport const HeightChangingFrame: React.FunctionComponent<IProps> = ({\r\n    children,\r\n    width,\r\n    handleKeyboard\r\n}) => {\r\n    const [height, setHeight] = useState(500);\r\n    const iframeRef = React.createRef<FrameRef>();\r\n    const handleResize = (iframe: React.RefObject<IFrame>) => {\r\n        if (\r\n            iframe.current &&\r\n            iframe.current.node.contentDocument &&\r\n            iframe.current.node.contentDocument.body.scrollHeight !== 0\r\n        ) {\r\n            console.log(iframe.current.node.contentDocument.body.scrollHeight);\r\n            setHeight(iframe.current.node.contentDocument.body.scrollHeight);\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        if (handleKeyboard) {\r\n            iframeRef.current?.node.contentWindow?.addEventListener('keydown', handleKeyboard);\r\n        }\r\n        const inter = setInterval(() => {\r\n            handleResize(iframeRef);\r\n        }, 200);\r\n        return () => {\r\n            if (handleKeyboard) {\r\n                iframeRef.current?.node.contentWindow?.removeEventListener('keydown', handleKeyboard);\r\n            }\r\n            clearInterval(inter);\r\n        }\r\n    }, [children]);\r\n    return (\r\n        <Frame\r\n            style={{\r\n                height,\r\n            }}\r\n            width={width}\r\n            ref={iframeRef}\r\n            onLoad={() => {\r\n                handleResize(iframeRef);\r\n            }}\r\n            scrolling=\"no\"\r\n            frameBorder=\"0\"\r\n        >{children}</Frame>\r\n    );\r\n};","import React from 'react';\r\n\r\nconst css = `\r\n#contentBody {\r\n    padding: 10px;\r\n    margin: 0 auto;\r\n}\r\n`;\r\n\r\nconst CustomReaderCss: React.FunctionComponent = () => {\r\n    return (\r\n        <div id=\"ReaderCss\">\r\n            <style>\r\n                {css}\r\n            </style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CustomReaderCss;","import React, { useEffect, useState } from 'react';\r\nimport { HistoryItem } from './HistoryFiles';\r\nimport parse, { attributesToProps, DOMNode, domToReact } from 'html-react-parser';\r\nimport {\r\n    Element,\r\n} from 'domhandler';\r\nimport { HeightChangingFrame } from './HeightChangingFrame';\r\nimport CustomReaderCss from './CustomReaderCss';\r\nimport { Typography } from '@material-ui/core';\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nconst HistoryViewer: React.FunctionComponent<{\r\n    initialItem?: HistoryItem,\r\n    onClickUrl: (url: string) => void;\r\n    handleKeyboard?: (e: KeyboardEvent) => void;\r\n}> = props => {\r\n    const { initialItem, onClickUrl, handleKeyboard } = props;\r\n    const [html, setHtml] = useState<string>();\r\n    useEffect(() => {\r\n        if (initialItem === undefined)\r\n            return;\r\n        if (html === undefined) {\r\n            const headers = new Headers();\r\n            headers.append('pragma', 'no-cache');\r\n            headers.append('cache-control', 'no-cache');\r\n\r\n            fetch(`https://docs.google.com/document/u/1/d/${initialItem.id}/pub?embedded=true&r=${Math.floor(Math.random() * 10000)}`, { headers, redirect: 'manual' })\r\n                .then(response => response.text())\r\n                .then(html => {\r\n                    setHtml(html);\r\n                })\r\n        }\r\n    }, [html]);\r\n\r\n    const replace: (\r\n        domNode: DOMNode\r\n    ) => JSX.Element | undefined | null = React.useCallback((node: DOMNode) => {\r\n        if (node.type === \"tag\") {\r\n            const element: Element = node as Element;\r\n            if (element.tagName === \"html\" || element.tagName === \"head\") {\r\n                return <>{domToReact(element.children, { replace })}</>;\r\n            }\r\n            if (element.tagName === \"body\") {\r\n                const props = attributesToProps(element.attribs);\r\n                return <div id=\"contentBody\" {...props}>\r\n                    {domToReact(element.children, { replace })}\r\n                </div>\r\n            }\r\n            if (element.tagName === \"a\") {\r\n                return <a style={{ cursor: \"pointer\" }} onClick={() => onClickUrl(element.attribs.href)}>\r\n                    {domToReact(element.children, { replace })}\r\n                </a>\r\n            }\r\n        }\r\n        return undefined;\r\n    }, [onClickUrl]);\r\n\r\n    if (initialItem === undefined) {\r\n        return <Typography variant=\"body1\">Válassz ki egy témakört...</Typography>;\r\n    }\r\n\r\n    if (html === undefined) {\r\n        return (\r\n            <div style={{margin: \"0 auto\", width: \"100px\"}}>\r\n                <Loader type=\"Watch\" color=\"#00BFFF\" width=\"100px\"/>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const parsed = parse(html, {\r\n        replace\r\n    });\r\n\r\n    return (\r\n        <HeightChangingFrame width=\"100%\" handleKeyboard={handleKeyboard}>\r\n            <CustomReaderCss />\r\n            {parsed}\r\n        </HeightChangingFrame>\r\n    )\r\n}\r\n\r\nexport default HistoryViewer;","import React, { useEffect, useState } from \"react\";\nimport Content from \"./Content\";\nimport { getHistoryItemById, getTopicFromItem, HistoryItem, loadHistoryItems, HistoryTopic, getIdFromGoogleLink } from \"./HistoryFiles\";\nimport HistoryViewer from \"./HistoryViewer\";\nimport './App.css';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { Divider, IconButton, SwipeableDrawer, Typography } from \"@material-ui/core\";\nimport { Menu, ArrowLeft, ArrowRight } from '@material-ui/icons';\n\nconst App: React.FunctionComponent = () => {\n    const [drawerOpen, setDrawerOpen] = useState(false);\n    const [topics, setTopics] = useState<HistoryTopic[]>();\n    const [historyItem, setHistoryItem] = useState<HistoryItem>();\n    const topic: HistoryTopic | undefined = React.useMemo(() => topics !== undefined && historyItem !== undefined\n        ? getTopicFromItem(topics, historyItem)\n        : undefined, [historyItem]);\n\n    const leftItem: HistoryItem | undefined = React.useMemo(() => {\n        if (topic === undefined)\n            return undefined;\n        const index = topic.items.findIndex(match => match === historyItem);\n        if (index < 1)\n            return undefined;\n\n        return topic.items[index - 1];\n    }, [historyItem])\n\n    const rightItem: HistoryItem | undefined = React.useMemo(() => {\n        if (topic === undefined)\n            return undefined;\n        const index = topic.items.findIndex(match => match === historyItem);\n        if (index >= topic.items.length)\n            return undefined;\n\n        return topic.items[index + 1];\n    }, [historyItem])\n\n    const handleUrlClick = (url: string) => {\n        if (topics === undefined) return;\n\n        const id = getIdFromGoogleLink(url);\n        const nextItem = getHistoryItemById(topics, id);\n        console.log(nextItem);\n        if (nextItem) {\n            setHistoryItem(nextItem);\n        }\n    }\n\n    const handleSelectItem =  React.useCallback((item: HistoryItem) => {\n        setHistoryItem(item);\n    }, []);\n\n    const handleLeft = React.useCallback(() => {\n        if (leftItem === undefined) return;\n        setHistoryItem(leftItem);\n    }, [leftItem]);\n\n    const handleRight = React.useCallback(() => {\n        if (rightItem === undefined) return;\n        setHistoryItem(rightItem);\n    }, [rightItem]);\n\n    useEffect(() => {\n        if (topics === undefined) {\n            loadHistoryItems()\n                .then(topics => {\n                    setTopics(topics);\n                    setHistoryItem(topics[0].items[0]);\n                });\n        }\n    }, [topics])\n\n    const keyboardHandler = React.useCallback((e: KeyboardEvent) => {\n        if (e.key === \"ArrowLeft\") {\n            handleLeft();\n        } else if (e.key === \"ArrowRight\") {\n            handleRight();\n        }\n    }, [handleLeft, handleRight])\n\n    useEffect(() => {        \n        document.addEventListener('keydown', keyboardHandler);\n        return () => {\n            document.removeEventListener('keydown', keyboardHandler);\n        }\n    }, [keyboardHandler])\n\n    if (topics === undefined) {\n        return (\n            <>\n                Loading\n            </>\n        )\n    }\n\n    return (\n        <>\n            <CssBaseline />\n            <div style={{ float: \"left\" }}>\n                <IconButton onClick={() => setDrawerOpen(true)}>\n                    <Menu />\n                </IconButton>\n            </div>\n            <SwipeableDrawer\n                anchor={\"left\"}\n                open={drawerOpen}\n                onClose={() => setDrawerOpen(false)}\n                onOpen={() => setDrawerOpen(true)}\n            >\n                <Content topics={topics} selectItem={handleSelectItem} />\n            </SwipeableDrawer>\n            <div id=\"content\">\n                <Typography variant=\"h2\" align=\"center\">\n                    {topic?.name}\n                </Typography>\n                <div style={{ display: \"flex\" }}>\n                    <div style={{ width: \"50%\" }}>\n                        <div style={{ margin: \"0 auto 0 0\", width: \"fit-content\", display: \"flex\", alignItems: \"center\" }}>\n                            <IconButton onClick={handleLeft}  style={{display: leftItem === undefined ? \"none\" : \"inherit\"}}>\n                                <ArrowLeft />\n                            </IconButton>\n                            <Typography variant=\"body1\">\n                                {leftItem?.name}\n                            </Typography>\n                        </div>\n                    </div>\n                    <div style={{ width: \"50%\" }}>\n                        <div style={{ margin: \"0 0 0 auto\", width: \"fit-content\", display: \"flex\", alignItems: \"center\" }}>\n                            <Typography variant=\"body1\">\n                                {rightItem?.name}\n                            </Typography>\n                            <IconButton onClick={handleRight} style={{display: rightItem === undefined ? \"none\" : \"inherit\"}}>\n                                <ArrowRight  />\n                            </IconButton>\n                        </div>\n                    </div>\n                </div>\n                <Divider />\n                <HistoryViewer key={historyItem?.id ?? \"not-selected\"}\n                    initialItem={historyItem}\n                    onClickUrl={handleUrlClick}\n                    handleKeyboard={keyboardHandler}\n                />\n                <Divider />\n            </div>\n        </>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import(\"web-vitals\").then(\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n                getCLS(onPerfEntry);\n                getFID(onPerfEntry);\n                getFCP(onPerfEntry);\n                getLCP(onPerfEntry);\n                getTTFB(onPerfEntry);\n            }\n        );\n    }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}